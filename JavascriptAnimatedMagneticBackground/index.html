<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Animated Magnetic Background</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <script>
    const container = document.body; // HTML 문서의 body 요소를 할당합니다.
    const totalBoxes = 300; // 생성할 사각형의 총 개수를 300개로 정의합니다
    const boxes = []; // 사각형 엘리먼트들을 저장할 배열을 생성

    for (let i = 1; i <= totalBoxes; i++) { // otalBoxes 값만큼 반복문을 실행하여 사각형을 생성하고 배열에 추가합니다.
      const box = document.createElement('div'); // div 엘리먼트를 생성
      box.className = 'box'; // box 클래스 할당
      container.appendChild(box); //  body 요소에 div 엘리먼트를 추가
      boxes.push(box); // 생성한 div 엘리먼트를 배열에 추가
    }

    // 마우스 이벤트
    document.addEventListener('mousemove', (event) => { // 마우스 이벤트를 감지하여 콜백 함수를 실행합니다.
      // 마우스 이벤트의 좌표를 가져옵니다.
      const { clientX, clientY } = event; // 객체 비구조화 할당을 사용했습니다.

      boxes.forEach((box) => {
        const boxRect = box.getBoundingClientRect(); // 각 사각형의 위치와 크기 정보를 가져옵니다.
        const boxCenterX = boxRect.left + boxRect.width / 2; // 사각형의 가운데 x 좌표를 계산합니다.
        const boxCenterY = boxRect.top + boxRect.height / 2; // 사각형의 가운데 y 좌표를 계산합니다.

        const deltaX = clientX - boxCenterX; // 마우스 위치와 사각형의 가운데 x 좌표와의 차이를 계산합니다.
        const deltaY = clientY - boxCenterY; // 마우스 위치와 사각형의 가운데 y 좌표와의 차이를 계산합니다.

        const angle = Math.atan2(deltaY, deltaX) * (180 / Math.PI); // 마우스 위치와 사각형의 가운데 위치를 이용하여 회전 각도를 계산합니다

        box.style.transform = `rotate(${angle}deg)`; // 계산된 각도로 사각형을 회전시킵니다.
      });
    });
  </script>
</body>

</html>