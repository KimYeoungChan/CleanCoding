<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Download Pregress Animation</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>

<body>
  <div id="container" class="container">
    <i class="fa-solid fa-down-long download"></i>
    <h2 id="number"></h2>
  </div>
  <script>
    // 변수 선언
    let download = document.querySelector('.download');
    let container = document.getElementById('container');
    let number = document.querySelector('#number');

    // 이벤트가 발생하면 진행률이 증가하는 애니메이션 효과를 생성하고, 진행률이 100%가 되면 완료 메시지를 표시하고 해당 요소의 스타일을 변경합니다.

    //  클릭시 start 클래스 추가
    download.addEventListener('click', function () {
      download.classList.add('start'); // start 클래스 추가
      let degree = 0; // 각도값 초기회
      let interval = setInterval(function () {
        degree += 1; // 1씩 증가
        if (degree > 100) { // degree가 100보다 크면 
          clearInterval(interval); // clearInterval함수 실행ㄴ
          number.innerHTML = '<i class="fa-solid fa-check"></i><br><small>100% Done</small>';
          // number의 요소 내용을 '<i class="fa-solid fa-check"></i><br><small>100% Done</small>'
          container.classList.add('done'); // container에 done 클래스 추가

          return;
        }

        container.style.background = `conic-gradient(#f5036c ${degree}%, #333 0%)`; // 배경 css를 conic-gradient를 이용해서 각도에 따른 그라데이션으로 변경
        number.innerHTML = degree + '<span>%</span>' //  내용을 진행률의 백분율로 변경
      }, 100)
    })
  </script>
</body>

</html>